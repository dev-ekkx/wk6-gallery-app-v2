<h2 class="my-4 font-bold text-2xl text-center">Upload your favorite images</h2>

<div 
class="p-6 border rounded-s-xl shadow-md max-w-4xl mx-auto mb-6"
(drop)="onDrop($event)"
(dragover)="onDragOver($event)"
(dragleave)="onDragLeave($event)"
  [class]="isDragOver() ? 'border-blue-500 bg-blue-100' : 'border-gray-300 bg-white'"
>
  <label
    class="flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg px-6 py-8 cursor-pointer hover:bg-gray-50 transition"
  >
    <span class="text-gray-500">Click or drag files to upload</span>
    <input type="file" accept=".png, .jpg, .jpeg" class="hidden" multiple 
    (change)="onFileChange($event)" 
    />
  </label>

  @if(images().length > 0) {
    <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-6 overflow-y-auto max-h-[60vh]">
      @for(img of images(); track $index) {
        <div class="relative border p-4 rounded-xl shadow-sm group">
          <img [src]="img.url" class="rounded-md w-full h-48 object-cover mb-2" />
          <textarea
        (input)="onInputChange($event, $index)"
          placeholder="Enter image description..."
          class="w-full p-2 border rounded resize-none h-24 focus:outline-none focus:ring focus:border-blue-500"
          ></textarea>
          <button
          (click)="onRemove($index)"
          class="absolute top-2 right-2 font-bold cursor-pointer hidden group-hover:block border-black rounded-full w-6 h-6 transition duration-200 ease-linear bg-red-600 hover:bg-red-400 text-white"
          title="Remove"
          >
          âœ•
        </button>
      </div>
    }
</div>

@if (!checkDescriptionsValidity()) {
  <p class="pt-4 text-sm text-red-600 font-semibold tracking-wide">Please provide descriptions for all images.</p>
}

<button
(click)="upload()"
[disabled]="isUploading()"
class="mt-6 bg-blue-600 cursor-pointer hover:bg-blue-700 flex items-center gap-4 text-white px-6 py-2 rounded-lg disabled:cursor-not-allowed disabled:bg-blue-400"
>
<span>
  Upload Images
</span>

@if (isUploading()) {
    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" viewBox="0 0 32 32">
      <path class="opacity-75" fill="currentColor"
      d="M4 12a8 8 0 018-8v4a4 4 0 00-4 8H8z"></path>
    </svg>
}
</button>
}
</div>